id: go-style
name: Go 코딩 스타일
type: coding-style
description: PAL Kit Go 코드 컨벤션
enabled: true
priority: 10

rules:
  - id: error-handling
    description: 에러는 즉시 처리하거나 래핑하여 반환
    severity: error
    examples:
      good:
        - |
          if err != nil {
              return fmt.Errorf("작업 실패: %w", err)
          }
      bad:
        - |
          if err != nil {
              return err  // 컨텍스트 없음
          }

  - id: naming
    description: Go 네이밍 컨벤션 준수
    severity: warning
    details: |
      - 패키지: 소문자, 짧게 (session, port, db)
      - 타입: PascalCase (Session, PortService)
      - 함수/메서드: PascalCase (exported), camelCase (unexported)
      - 상수: PascalCase 또는 ALL_CAPS (특별한 경우)
      - 인터페이스: -er 접미사 (Reader, Writer, Service)

  - id: comments
    description: 공개 API에는 GoDoc 주석 필수
    severity: info
    examples:
      good:
        - |
          // NewService creates a new session service.
          func NewService(db *db.DB) *Service {

  - id: package-structure
    description: 패키지 구조 규칙
    severity: info
    details: |
      internal/
      ├── cli/          # Cobra 명령어
      ├── config/       # 설정 및 경로
      ├── db/           # 데이터베이스
      ├── session/      # 세션 서비스
      ├── port/         # 포트 서비스
      ├── pipeline/     # 파이프라인 서비스
      ├── server/       # WebUI 서버
      └── ...

  - id: sql-style
    description: SQL 쿼리 스타일
    severity: info
    examples:
      good:
        - |
          _, err := s.db.Exec(`
              INSERT INTO sessions (id, title, status)
              VALUES (?, ?, 'running')
          `, id, title)
