# PAL Kit ì‚¬ìš©ì ë§¤ë‰´ì–¼

> PAL Kitê³¼ Claude Code í†µí•© ê°€ì´ë“œ

---

## ëª©ì°¨

1. [ê°œìš”](#1-ê°œìš”)
2. [í•µì‹¬ ê°œë…](#2-í•µì‹¬-ê°œë…)
3. [Claude Code í†µí•©](#3-claude-code-í†µí•©)
4. [í›…(Hook) ì‹œìŠ¤í…œ](#4-í›…hook-ì‹œìŠ¤í…œ)
5. [ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ](#5-ì—ì´ì „íŠ¸-ì‹œìŠ¤í…œ)
6. [ì‘ì—… íë¦„](#6-ì‘ì—…-íë¦„)
7. [Knowledge Base](#7-knowledge-base)
8. [CLI ëª…ë ¹ì–´](#8-cli-ëª…ë ¹ì–´)
9. [ì„¤ì • íŒŒì¼](#9-ì„¤ì •-íŒŒì¼)

---

## 1. ê°œìš”

### PAL Kitì´ë€?

PAL Kit(Project Assistant for LLM Kit)ì€ Claude Codeì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” **í”„ë¡œì íŠ¸ ê´€ë¦¬ CLI ë„êµ¬**ì…ë‹ˆë‹¤.

**í•µì‹¬ ê¸°ëŠ¥:**
- í¬íŠ¸(Port) ê¸°ë°˜ ì‘ì—… ê´€ë¦¬
- ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œì„ í†µí•œ ì—­í•  ë¶„ë¦¬
- Claude Code Hook ì—°ë™
- Knowledge Base ë¬¸ì„œ ê´€ë¦¬

### ì™œ í•„ìš”í•œê°€?

Claude Codeë¡œ ë³µì¡í•œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ë•Œ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤:

| ë¬¸ì œ | PAL Kit í•´ê²°ì±… |
|------|---------------|
| ì»¨í…ìŠ¤íŠ¸ ìœ ì‹¤ (Compaction) | ì„¸ì…˜/í¬íŠ¸ ìƒíƒœ ì €ì¥, ìë™ ë³µêµ¬ |
| ì‘ì—… ì¶”ì  ì–´ë ¤ì›€ | í¬íŠ¸ ê¸°ë°˜ ì‘ì—… ëª…ì„¸ |
| ì—ì´ì „íŠ¸ ì—­í•  í˜¼ë€ | ëª…í™•í•œ ì—­í•  ë¶„ë¦¬ (Core/Worker) |
| ë¬¸ì„œ ê²€ìƒ‰ ë¹„íš¨ìœ¨ | KB ìƒ‰ì¸ ë° ê²€ìƒ‰ |

### ê¸°ë³¸ êµ¬ì¡°

```
project/
â”œâ”€â”€ .pal/                    # PAL Kit ì„¤ì •
â”‚   â”œâ”€â”€ config.yaml          # í”„ë¡œì íŠ¸ ì„¤ì •
â”‚   â”œâ”€â”€ manifest.yaml        # íŒŒì¼ ì¶”ì 
â”‚   â”œâ”€â”€ decisions/           # ADR ê¸°ë¡
â”‚   â””â”€â”€ sessions/            # ì„¸ì…˜ ê¸°ë¡
â”œâ”€â”€ .claude/                 # Claude Code ì„¤ì •
â”‚   â”œâ”€â”€ settings.json        # Hook ì„¤ì •
â”‚   â””â”€â”€ rules/               # ì¡°ê±´ë¶€ ê·œì¹™ (.rules.md)
â”œâ”€â”€ agents/                  # ì—ì´ì „íŠ¸ ì •ì˜
â”‚   â”œâ”€â”€ core/                # ì½”ì–´ ì—ì´ì „íŠ¸
â”‚   â””â”€â”€ workers/             # ì›Œì»¤ ì—ì´ì „íŠ¸
â”œâ”€â”€ ports/                   # í¬íŠ¸ ëª…ì„¸
â”œâ”€â”€ conventions/             # ì»¨ë²¤ì…˜ ë¬¸ì„œ
â”œâ”€â”€ CLAUDE.md                # Claude ì»¨í…ìŠ¤íŠ¸
â””â”€â”€ docs/                    # í”„ë¡œì íŠ¸ ë¬¸ì„œ
```

---

## 2. í•µì‹¬ ê°œë…

### 2.1 í¬íŠ¸ (Port)

**í¬íŠ¸**ëŠ” PAL Kitì˜ ê¸°ë³¸ ì‘ì—… ë‹¨ìœ„ì…ë‹ˆë‹¤. í•˜ë‚˜ì˜ ê¸°ëŠ¥/ì‘ì—…ì„ ëª…ì„¸í•œ ë¬¸ì„œì…ë‹ˆë‹¤.

```yaml
# ports/user-auth.md
---
title: ì‚¬ìš©ì ì¸ì¦ êµ¬í˜„
status: running       # draft â†’ running â†’ complete
priority: high
dependencies: [database-setup]
---

## ëª©í‘œ
JWT ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦ êµ¬í˜„

## ì‘ì—… í•­ëª©
- [ ] ë¡œê·¸ì¸ API
- [ ] í† í° ê°±ì‹ 
- [ ] ë¡œê·¸ì•„ì›ƒ
```

**í¬íŠ¸ ìƒíƒœ:**
- `draft`: ì‘ì„± ì¤‘
- `running`: ì§„í–‰ ì¤‘ (`.rules.md` ìë™ ìƒì„±)
- `complete`: ì™„ë£Œ

**í¬íŠ¸ ì‚¬ìš© íë¦„:**
```
1. pal port create user-auth     # í¬íŠ¸ ìƒì„±
2. pal hook port-start user-auth # ì‘ì—… ì‹œì‘ (rules í™œì„±í™”)
3. ... ì‘ì—… ì§„í–‰ ...
4. pal hook port-end user-auth   # ì‘ì—… ì™„ë£Œ (rules ì œê±°)
```

### 2.2 ì„¸ì…˜ (Session)

Claude Codeì™€ì˜ ëŒ€í™” ì„¸ì…˜ì…ë‹ˆë‹¤. PAL Kitì´ ì„¸ì…˜ì„ ì¶”ì í•˜ì—¬:
- ì„¸ì…˜ë³„ ì‘ì—… ê¸°ë¡
- ì»´íŒ©ì…˜ ì „ ìƒíƒœ ì €ì¥
- ì„¸ì…˜ ê°„ ì—°ì†ì„± ìœ ì§€

### 2.3 ê·œì¹™ (Rules)

`.claude/rules/` ë””ë ‰í† ë¦¬ì˜ `.rules.md` íŒŒì¼ì€ Claudeê°€ **ì¡°ê±´ë¶€ë¡œ ë¡œë“œ**í•˜ëŠ” ì§€ì¹¨ì…ë‹ˆë‹¤.

- í¬íŠ¸ê°€ `running` ìƒíƒœë©´ í•´ë‹¹ í¬íŠ¸ì˜ rules íŒŒì¼ì´ ìë™ ìƒì„±ë¨
- ClaudeëŠ” rules íŒŒì¼ì„ ì½ê³  í•´ë‹¹ ì‘ì—…ì— íŠ¹í™”ëœ ì§€ì¹¨ì„ ë”°ë¦„

---

## 3. Claude Code í†µí•©

### 3.1 CLAUDE.md

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ `CLAUDE.md`ëŠ” Claudeê°€ ì„¸ì…˜ ì‹œì‘ ì‹œ ìë™ìœ¼ë¡œ ì½ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.

**í¬í•¨ ë‚´ìš©:**
- í”„ë¡œì íŠ¸ ê°œìš”
- ê¸°ìˆ  ìŠ¤íƒ
- ì›Œí¬í”Œë¡œìš° ì„¤ì •
- í™œì„± ì—ì´ì „íŠ¸ ëª©ë¡
- ì§„í–‰ ì¤‘ì¸ í¬íŠ¸ ìƒíƒœ

PAL Kitì´ CLAUDE.mdì˜ íŠ¹ì • ì„¹ì…˜ì„ ìë™ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤:

```markdown
<!-- pal:context:start -->
> ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-01-15

### í™œì„± ì„¸ì…˜
- **abc123**: impl-user-auth

### í¬íŠ¸ í˜„í™©
- âœ… complete: 5
- ğŸ”„ running: 2
<!-- pal:context:end -->
```

### 3.2 settings.json

`.claude/settings.json`ì—ì„œ Hookì„ ì„¤ì •í•©ë‹ˆë‹¤:

```json
{
  "hooks": {
    "SessionStart": [{
      "hooks": [{ "command": "pal hook session-start", "type": "command" }],
      "matcher": ""
    }],
    "SessionEnd": [{
      "hooks": [{ "command": "pal hook session-end", "type": "command" }]
    }],
    "PreToolUse": [{
      "hooks": [{ "command": "pal hook pre-tool-use", "type": "command" }]
    }],
    "PostToolUse": [{
      "hooks": [{ "command": "pal hook post-tool-use", "type": "command" }]
    }],
    "PreCompact": [{
      "hooks": [{ "command": "pal hook pre-compact", "type": "command" }],
      "matcher": "auto"
    }],
    "Stop": [{
      "hooks": [{ "command": "pal hook stop", "type": "command" }]
    }]
  }
}
```

---

## 4. í›…(Hook) ì‹œìŠ¤í…œ

### 4.1 í›…ì´ë€?

Claude CodeëŠ” íŠ¹ì • ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ì™¸ë¶€ ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. PAL Kitì€ ì´ë¥¼ í™œìš©í•´ ìƒíƒœë¥¼ ë™ê¸°í™”í•©ë‹ˆë‹¤.

### 4.2 í›… ì¢…ë¥˜ì™€ ë™ì‘

#### SessionStart

**ë°œìƒ ì‹œì :** ìƒˆ ì„¸ì…˜ ì‹œì‘ ì‹œ

**PAL Kit ë™ì‘:**
1. ì„¸ì…˜ ID ë“±ë¡
2. manifest.yaml ë³€ê²½ ê°ì§€ â†’ CLAUDE.md ì—…ë°ì´íŠ¸
3. running í¬íŠ¸ì˜ rules íŒŒì¼ í™•ì¸
4. ì„¸ì…˜ ì»¨í…ìŠ¤íŠ¸ ì¶œë ¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Claude Code]                                   â”‚
â”‚    ìƒˆ ì„¸ì…˜ ì‹œì‘                                  â”‚
â”‚         â”‚                                       â”‚
â”‚         â–¼                                       â”‚
â”‚ [SessionStart Hook]                             â”‚
â”‚    pal hook session-start                       â”‚
â”‚         â”‚                                       â”‚
â”‚         â–¼                                       â”‚
â”‚ [PAL Kit]                                       â”‚
â”‚    1. ì„¸ì…˜ ë“±ë¡                                  â”‚
â”‚    2. manifest ì²´í¬ â†’ CLAUDE.md ê°±ì‹              â”‚
â”‚    3. running í¬íŠ¸ rules í™•ì¸                    â”‚
â”‚    4. ì»¨í…ìŠ¤íŠ¸ ì¶œë ¥                              â”‚
â”‚         â”‚                                       â”‚
â”‚         â–¼                                       â”‚
â”‚ [Claude]                                        â”‚
â”‚    CLAUDE.md + rules ì½ê³  ì‘ì—… ì‹œì‘              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¶œë ¥ ì˜ˆì‹œ:**
```
ğŸ’¡ ì„¤ì • íŒŒì¼ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. `pal manifest status`ë¡œ í™•ì¸í•´ë³´ì„¸ìš”.
ğŸ“‹ 1 running port(s)
```

#### SessionEnd

**ë°œìƒ ì‹œì :** ì„¸ì…˜ ì¢…ë£Œ ì‹œ (exit, clear ë“±)

**PAL Kit ë™ì‘:**
1. ì„¸ì…˜ ìƒíƒœ ì €ì¥
2. Lock ìë™ í•´ì œ
3. running í¬íŠ¸ ì •ë¦¬ (í•„ìš” ì‹œ)

#### PreToolUse

**ë°œìƒ ì‹œì :** Claudeê°€ ë„êµ¬(Tool) ì‚¬ìš© ì „

**PAL Kit ë™ì‘:**
- íŠ¹ì • ë„êµ¬ ì‚¬ìš© ì‹œ ê²½ê³ /ì°¨ë‹¨ ê°€ëŠ¥
- í˜„ì¬ëŠ” íŒ¨ìŠ¤ìŠ¤ë£¨

#### PostToolUse

**ë°œìƒ ì‹œì :** Claudeê°€ ë„êµ¬ ì‚¬ìš© í›„

**PAL Kit ë™ì‘:**
- ë„êµ¬ ê²°ê³¼ ë¡œê¹…
- íŠ¹ì • íŒ¨í„´ ê°ì§€ ì‹œ ì•Œë¦¼

#### PreCompact

**ë°œìƒ ì‹œì :** ì»´íŒ©ì…˜(ìš”ì•½) ë°œìƒ ì§ì „

**PAL Kit ë™ì‘:**
1. í˜„ì¬ ì„¸ì…˜ ìƒíƒœ ì €ì¥
2. running í¬íŠ¸ ëª©ë¡ ê¸°ë¡
3. ë§ˆì§€ë§‰ ì‘ì—… ë‚´ìš© ì €ì¥
4. ì»´íŒ©ì…˜ í›„ ë³µêµ¬ ê°€ëŠ¥í•˜ë„ë¡ ì¤€ë¹„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Claude Code]                                   â”‚
â”‚    ì»¨í…ìŠ¤íŠ¸ í•œê³„ ë„ë‹¬                            â”‚
â”‚         â”‚                                       â”‚
â”‚         â–¼                                       â”‚
â”‚ [PreCompact Hook]                               â”‚
â”‚    pal hook pre-compact                         â”‚
â”‚         â”‚                                       â”‚
â”‚         â–¼                                       â”‚
â”‚ [PAL Kit]                                       â”‚
â”‚    1. í˜„ì¬ ìƒíƒœ ìŠ¤ëƒ…ìƒ· ì €ì¥                      â”‚
â”‚    2. running í¬íŠ¸ ê¸°ë¡                          â”‚
â”‚    3. ì‘ì—… ë¸Œë¦¬í•‘ ì €ì¥                           â”‚
â”‚         â”‚                                       â”‚
â”‚         â–¼                                       â”‚
â”‚ [Claude Code]                                   â”‚
â”‚    ì»´íŒ©ì…˜ ìˆ˜í–‰ (ìš”ì•½)                            â”‚
â”‚         â”‚                                       â”‚
â”‚         â–¼                                       â”‚
â”‚ [Claude]                                        â”‚
â”‚    ì´ì „ ì»¨í…ìŠ¤íŠ¸ ìš”ì•½ + CLAUDE.mdë¡œ ì‘ì—… ì¬ê°œ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Stop

**ë°œìƒ ì‹œì :** Claudeê°€ ì‘ë‹µ ì™„ë£Œ ì‹œ

**PAL Kit ë™ì‘:**
- ì„¸ì…˜ í†µê³„ ì—…ë°ì´íŠ¸
- í•„ìš” ì‹œ ìƒíƒœ ë™ê¸°í™”

### 4.3 í¬íŠ¸ í›…

í¬íŠ¸ ì‹œì‘/ì¢…ë£Œ ì‹œ ìˆ˜ë™ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” í›…ì…ë‹ˆë‹¤:

```bash
# í¬íŠ¸ ì‘ì—… ì‹œì‘
pal hook port-start user-auth
# â†’ í¬íŠ¸ ìƒíƒœ: running
# â†’ .claude/rules/user-auth.rules.md ìƒì„±

# í¬íŠ¸ ì‘ì—… ì™„ë£Œ
pal hook port-end user-auth
# â†’ í¬íŠ¸ ìƒíƒœ: complete
# â†’ .claude/rules/user-auth.rules.md ì‚­ì œ
```

### 4.4 ì „ì²´ í›… íë¦„ë„

```
ì„¸ì…˜ ì‹œì‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                   â”‚
    â–¼                                                                   â”‚
[SessionStart Hook]                                                     â”‚
    â”‚                                                                   â”‚
    â”œâ”€â”€ manifest ë³€ê²½? â”€â”€yesâ”€â”€â–¶ CLAUDE.md ì—…ë°ì´íŠ¸                       â”‚
    â”‚                                                                   â”‚
    â”œâ”€â”€ running í¬íŠ¸? â”€â”€yesâ”€â”€â–¶ rules íŒŒì¼ í™•ì¸/ìƒì„±                      â”‚
    â”‚                                                                   â”‚
    â–¼                                                                   â”‚
Claude ì‘ì—… ì‹œì‘                                                        â”‚
    â”‚                                                                   â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
    â”‚   â”‚ ë„êµ¬ ì‚¬ìš© ë£¨í”„   â”‚                                            â”‚
    â”‚   â”‚    â”‚            â”‚                                            â”‚
    â”‚   â”‚    â–¼            â”‚                                            â”‚
    â”‚   â”‚ [PreToolUse]    â”‚                                            â”‚
    â”‚   â”‚    â”‚            â”‚                                            â”‚
    â”‚   â”‚    â–¼            â”‚                                            â”‚
    â”‚   â”‚  ë„êµ¬ ì‹¤í–‰       â”‚                                            â”‚
    â”‚   â”‚    â”‚            â”‚                                            â”‚
    â”‚   â”‚    â–¼            â”‚                                            â”‚
    â”‚   â”‚ [PostToolUse]   â”‚                                            â”‚
    â”‚   â”‚    â”‚            â”‚                                            â”‚
    â”‚   â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
    â”‚                                                                   â”‚
    â”œâ”€â”€ ì»¨í…ìŠ¤íŠ¸ í•œê³„? â”€â”€yesâ”€â”€â–¶ [PreCompact Hook] â”€â”€â–¶ ì»´íŒ©ì…˜             â”‚
    â”‚                                          â”‚                       â”‚
    â”‚                                          â–¼                       â”‚
    â”‚                                     ìƒíƒœ ì €ì¥                     â”‚
    â”‚                                                                   â”‚
    â–¼                                                                   â”‚
[Stop Hook] â—€â”€â”€ ë§¤ ì‘ë‹µ ì™„ë£Œ ì‹œ                                         â”‚
    â”‚                                                                   â”‚
    â”‚                                                                   â”‚
ì„¸ì…˜ ì¢…ë£Œ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
[SessionEnd Hook]
    â”‚
    â”œâ”€â”€ ì„¸ì…˜ ìƒíƒœ ì €ì¥
    â”‚
    â””â”€â”€ Lock í•´ì œ
```

---

## 5. ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ

### 5.1 ì—ì´ì „íŠ¸ íƒ€ì…

PAL Kitì€ ë‘ ì¢…ë¥˜ì˜ ì—ì´ì „íŠ¸ë¥¼ ì •ì˜í•©ë‹ˆë‹¤:

#### Core Agent (ì½”ì–´ ì—ì´ì „íŠ¸)

ë©”ì¸ ì„¸ì…˜ì„ ìœ ì§€í•˜ë©° ì‘ì—…ì„ **ì¡°ìœ¨**í•˜ëŠ” ì—ì´ì „íŠ¸

| ì—ì´ì „íŠ¸ | ì—­í•  |
|----------|------|
| **Builder** | ë©”ì¸ ì¡°ìœ¨ì. ì„œë¸Œì„¸ì…˜ spawn/ê´€ë¦¬ |
| **Planner** | ìš”êµ¬ì‚¬í•­ ë¶„ì„, í¬íŠ¸ ë¶„í•´ |
| **Architect** | ê¸°ìˆ  ê²€í† , ì•„í‚¤í…ì²˜ ê²°ì • |
| **Operator** | ì„¸ì…˜ ê´€ë¦¬, ë¡œê¹… |
| **Tester** | í…ŒìŠ¤íŠ¸ ì‘ì„±/ì‹¤í–‰ |

#### Worker Agent (ì›Œì»¤ ì—ì´ì „íŠ¸)

ì‹¤ì œ **ì½”ë“œë¥¼ ì‘ì„±**í•˜ëŠ” ì—ì´ì „íŠ¸ (ê¸°ìˆ  ìŠ¤íƒë³„)

| ì—ì´ì „íŠ¸ | ì—­í•  |
|----------|------|
| **worker-go** | Go ì½”ë“œ ì‘ì„± |
| **worker-typescript** | TypeScript ì½”ë“œ ì‘ì„± |
| **backend/entity** | ë°±ì—”ë“œ Entity êµ¬í˜„ |
| **backend/service** | ë°±ì—”ë“œ Service êµ¬í˜„ |
| **frontend/ui** | UI ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ |

### 5.2 ì—ì´ì „íŠ¸ íŒŒì¼ êµ¬ì¡°

```
agents/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ builder.yaml        # ì—ì´ì „íŠ¸ ì •ì˜
â”‚   â””â”€â”€ builder.rules.md    # ì‹¤í–‰ ê·œì¹™
â””â”€â”€ workers/
    â””â”€â”€ backend/
        â”œâ”€â”€ entity.yaml
        â””â”€â”€ entity.rules.md
```

**ì—ì´ì „íŠ¸ ì •ì˜ (YAML):**
```yaml
agent:
  id: builder
  name: Builder
  type: core

  description: |
    ë©”ì¸ ì„¸ì…˜ì„ ìœ ì§€í•˜ë©° ì‘ì—…ì„ ì¡°ìœ¨í•˜ëŠ” í•µì‹¬ ì½”ì–´ ì—ì´ì „íŠ¸.

  responsibilities:
    - ì„¸ì…˜ ê´€ë¦¬
    - ì„œë¸Œì„¸ì…˜ spawn/ì¢…ë£Œ ê²°ì •
    - ì§„í–‰ ìƒí™© ëª¨ë‹ˆí„°ë§

  tools:
    cli:
      - pal status
      - pal port list
```

### 5.3 Builderì™€ ì„œë¸Œì„¸ì…˜

BuilderëŠ” ë³µì¡í•œ ì‘ì—…ì„ **ì„œë¸Œì„¸ì…˜**ìœ¼ë¡œ ìœ„ì„í•©ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Builder - ë©”ì¸ ì„¸ì…˜]                            â”‚
â”‚                                                 â”‚
â”‚  "ì‚¬ìš©ì ì¸ì¦ êµ¬í˜„í•´ì¤˜"                           â”‚
â”‚       â”‚                                         â”‚
â”‚       â”œâ”€â”€ ìš”êµ¬ì‚¬í•­ íŒŒì•… (ì§ì ‘, ê°„ë‹¨íˆ)             â”‚
â”‚       â”‚                                         â”‚
â”‚       â”œâ”€â”€ Planner spawn â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚       â”‚                                   â”‚     â”‚
â”‚       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚
â”‚       â”‚   â”‚ [Planner ì„œë¸Œì„¸ì…˜]       â”‚    â”‚     â”‚
â”‚       â”‚   â”‚  - ìš”êµ¬ì‚¬í•­ ìƒì„¸ ë¶„ì„    â”‚    â”‚     â”‚
â”‚       â”‚   â”‚  - í¬íŠ¸ ë¶„í•´            â”‚    â”‚     â”‚
â”‚       â”‚   â”‚  - ê²°ê³¼ ë°˜í™˜            â”‚    â”‚     â”‚
â”‚       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚
â”‚       â”‚                                   â”‚     â”‚
â”‚       â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚       â”‚                                         â”‚
â”‚       â”œâ”€â”€ Worker spawn â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚       â”‚                                   â”‚     â”‚
â”‚       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚
â”‚       â”‚   â”‚ [Worker ì„œë¸Œì„¸ì…˜]        â”‚    â”‚     â”‚
â”‚       â”‚   â”‚  - ì½”ë“œ êµ¬í˜„            â”‚    â”‚     â”‚
â”‚       â”‚   â”‚  - í…ŒìŠ¤íŠ¸ ì‘ì„±          â”‚    â”‚     â”‚
â”‚       â”‚   â”‚  - ê²°ê³¼ ë°˜í™˜            â”‚    â”‚     â”‚
â”‚       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚
â”‚       â”‚                                   â”‚     â”‚
â”‚       â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚       â”‚                                         â”‚
â”‚       â””â”€â”€ ê²°ê³¼ ê²€í†  (ì§ì ‘)                       â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìœ„ì„ ê·œì¹™:**
- âœ… ì§ì ‘ í•´ë„ ë¨: ê°„ë‹¨í•œ ìš”êµ¬ì‚¬í•­ íŒŒì•…, ê²°ê³¼ ê²€í† , ì‚¬ìš©ì ì†Œí†µ
- âŒ ë°˜ë“œì‹œ ìœ„ì„: 10ì¤„+ ì½”ë“œ ì‘ì„±, ë³µì¡í•œ ë¶„ì„, í…ŒìŠ¤íŠ¸ ì‘ì„±

---

## 6. ì‘ì—… íë¦„

### 6.1 ê¸°ë³¸ ì›Œí¬í”Œë¡œìš°

```
1. ì„¸ì…˜ ì‹œì‘
   â”œâ”€â”€ Claude Code ì‹¤í–‰
   â”œâ”€â”€ SessionStart Hook â†’ ìƒíƒœ ë¡œë“œ
   â””â”€â”€ CLAUDE.md ì½ê¸°

2. ì‘ì—… ìš”ì²­
   â”œâ”€â”€ ì‚¬ìš©ì: "ê¸°ëŠ¥ X êµ¬í˜„í•´ì¤˜"
   â”œâ”€â”€ Builder: ìš”êµ¬ì‚¬í•­ íŒŒì•…
   â””â”€â”€ í¬íŠ¸ ì¡´ì¬ í™•ì¸/ìƒì„±

3. í¬íŠ¸ ì‹œì‘
   â”œâ”€â”€ pal hook port-start <id>
   â”œâ”€â”€ ìƒíƒœ: running
   â””â”€â”€ rules íŒŒì¼ í™œì„±í™”

4. ì‘ì—… ì§„í–‰
   â”œâ”€â”€ í•„ìš”ì‹œ ì„œë¸Œì„¸ì…˜ ìœ„ì„
   â”œâ”€â”€ ë„êµ¬ ì‚¬ìš© (Read, Edit, Bash...)
   â””â”€â”€ PostToolUse Hook ë¡œê¹…

5. ì»´íŒ©ì…˜ (í•„ìš”ì‹œ)
   â”œâ”€â”€ PreCompact Hook â†’ ìƒíƒœ ì €ì¥
   â”œâ”€â”€ Claude ìš”ì•½
   â””â”€â”€ ì‘ì—… ì¬ê°œ

6. í¬íŠ¸ ì™„ë£Œ
   â”œâ”€â”€ pal hook port-end <id>
   â”œâ”€â”€ ìƒíƒœ: complete
   â””â”€â”€ rules íŒŒì¼ ì œê±°

7. ì„¸ì…˜ ì¢…ë£Œ
   â”œâ”€â”€ SessionEnd Hook
   â””â”€â”€ ìƒíƒœ ì €ì¥
```

### 6.2 ì»´íŒ©ì…˜ ë³µêµ¬ íë¦„

ì»´íŒ©ì…˜ì€ Claude Codeì˜ ì»¨í…ìŠ¤íŠ¸ í•œê³„ì— ë„ë‹¬í–ˆì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.

```
ì»´íŒ©ì…˜ ì „                         ì»´íŒ©ì…˜ í›„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì „ì²´ ëŒ€í™” ë‚´ì—­       â”‚       â”‚ ìš”ì•½ëœ ì»¨í…ìŠ¤íŠ¸      â”‚
â”‚ (100K+ í† í°)        â”‚  â†’    â”‚ (ì••ì¶•ë¨)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                              â”‚
        â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [PreCompact Hook]   â”‚       â”‚ Claude ì‘ì—… ì¬ê°œ     â”‚
â”‚  - ìƒíƒœ ìŠ¤ëƒ…ìƒ·      â”‚       â”‚  - CLAUDE.md ì½ê¸°   â”‚
â”‚  - í¬íŠ¸ ëª©ë¡ ì €ì¥   â”‚       â”‚  - running í¬íŠ¸ í™•ì¸ â”‚
â”‚  - ë¸Œë¦¬í•‘ ì €ì¥      â”‚       â”‚  - rules ë¡œë“œ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

PAL Kitì€ CLAUDE.mdì— í˜„ì¬ ìƒíƒœë¥¼ ê¸°ë¡í•´ë‘ë¯€ë¡œ, ì»´íŒ©ì…˜ í›„ì—ë„ Claudeê°€ ë§¥ë½ì„ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## 7. Knowledge Base

### 7.1 KB ê°œìš”

Knowledge Base(KB)ëŠ” í”„ë¡œì íŠ¸ ë¬¸ì„œë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

**ê¸°ëŠ¥:**
- êµ¬ì¡°í™”ëœ ë””ë ‰í† ë¦¬ ì²´ê³„
- ìë™ ëª©ì°¨ ìƒì„±
- SQLite ê¸°ë°˜ ì „ë¬¸ ê²€ìƒ‰
- ë§í¬/íƒœê·¸ ê´€ë¦¬
- í”„ë¡œì íŠ¸ ë™ê¸°í™”

### 7.2 KB êµ¬ì¡°

```
vault/
â”œâ”€â”€ _taxonomy/              # ë¶„ë¥˜ì²´ê³„ ì •ì˜
â”œâ”€â”€ 00-System/              # ì‹œìŠ¤í…œ ë¬¸ì„œ
â”œâ”€â”€ 10-Domains/             # ë„ë©”ì¸ ì§€ì‹
â”œâ”€â”€ 20-Projects/            # í”„ë¡œì íŠ¸ ë¬¸ì„œ (ë™ê¸°í™” ëŒ€ìƒ)
â”œâ”€â”€ 30-References/          # ì°¸ì¡° ë¬¸ì„œ
â”œâ”€â”€ 40-Archive/             # ì•„ì¹´ì´ë¸Œ
â””â”€â”€ .pal-kb/                # ë©”íƒ€ë°ì´í„°
    â”œâ”€â”€ index.db            # ê²€ìƒ‰ ìƒ‰ì¸
    â””â”€â”€ sync-state.yaml     # ë™ê¸°í™” ìƒíƒœ
```

### 7.3 KB ëª…ë ¹ì–´

```bash
# ì´ˆê¸°í™”
pal kb init /path/to/vault

# ëª©ì°¨ ê´€ë¦¬
pal kb toc generate [section]
pal kb toc update
pal kb toc check

# ìƒ‰ì¸ ë° ê²€ìƒ‰
pal kb index
pal kb search "query" --type port --domain auth
pal kb stats

# ë§í¬/íƒœê·¸
pal kb link check
pal kb tag list
pal kb tag orphan

# í”„ë¡œì íŠ¸ ë™ê¸°í™”
pal kb sync . /path/to/vault
pal kb sync-status

# ë¶„ë¥˜ ì¶”ì²œ
pal kb classify file.md

# í’ˆì§ˆ ê²€ì‚¬
pal kb lint file.md
pal kb lint directory/
```

### 7.4 í”„ë¡œì íŠ¸ ë™ê¸°í™”

í”„ë¡œì íŠ¸ ë¬¸ì„œë¥¼ KBë¡œ ë™ê¸°í™”í•©ë‹ˆë‹¤:

```
í”„ë¡œì íŠ¸                          Vault
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ports/            â†’    20-Projects/{project}/ports/
.pal/decisions/   â†’    20-Projects/{project}/decisions/
.pal/sessions/    â†’    20-Projects/{project}/sessions/
docs/             â†’    20-Projects/{project}/docs/
```

```bash
# ë™ê¸°í™” ë¯¸ë¦¬ë³´ê¸°
pal kb sync . /path/to/vault --dry-run

# ì‹¤ì œ ë™ê¸°í™”
pal kb sync . /path/to/vault

# ë™ê¸°í™” ìƒíƒœ í™•ì¸
pal kb sync-status /path/to/vault
```

---

## 8. CLI ëª…ë ¹ì–´

### 8.1 ìƒíƒœ ê´€ë¦¬

```bash
pal status                    # ì „ì²´ ìƒíƒœ
pal manifest status           # íŒŒì¼ ì¶”ì  ìƒíƒœ
```

### 8.2 í¬íŠ¸ ê´€ë¦¬

```bash
pal port list                 # í¬íŠ¸ ëª©ë¡
pal port create <id>          # í¬íŠ¸ ìƒì„±
pal port show <id>            # í¬íŠ¸ ìƒì„¸
pal port status <id> <status> # ìƒíƒœ ë³€ê²½
```

### 8.3 í›…

```bash
pal hook session-start        # ì„¸ì…˜ ì‹œì‘ (Claude ìë™ í˜¸ì¶œ)
pal hook session-end          # ì„¸ì…˜ ì¢…ë£Œ (Claude ìë™ í˜¸ì¶œ)
pal hook pre-tool-use         # ë„êµ¬ ì‚¬ìš© ì „ (Claude ìë™ í˜¸ì¶œ)
pal hook post-tool-use        # ë„êµ¬ ì‚¬ìš© í›„ (Claude ìë™ í˜¸ì¶œ)
pal hook pre-compact          # ì»´íŒ©ì…˜ ì „ (Claude ìë™ í˜¸ì¶œ)
pal hook stop                 # ì‘ë‹µ ì™„ë£Œ (Claude ìë™ í˜¸ì¶œ)

pal hook port-start <id>      # í¬íŠ¸ ì‘ì—… ì‹œì‘ (ìˆ˜ë™)
pal hook port-end <id>        # í¬íŠ¸ ì‘ì—… ì™„ë£Œ (ìˆ˜ë™)
pal hook sync                 # rules ë™ê¸°í™”
pal hook event <type> <msg>   # ì´ë²¤íŠ¸ ê¸°ë¡
```

### 8.4 Knowledge Base

```bash
# ì´ˆê¸°í™”/ìƒíƒœ
pal kb init [path]
pal kb status [path]

# ëª©ì°¨
pal kb toc generate [section]
pal kb toc update [section]
pal kb toc check [section]

# ìƒ‰ì¸/ê²€ìƒ‰
pal kb index [--rebuild]
pal kb search "query" [--type X] [--domain X] [--tag X] [--limit N]
pal kb stats

# ë§í¬/íƒœê·¸
pal kb link check [path]
pal kb link graph [path]
pal kb tag list [path]
pal kb tag orphan [path]

# ë™ê¸°í™”
pal kb sync <project> [vault] [--dry-run] [--force]
pal kb sync-status [vault]

# ë¶„ë¥˜/í’ˆì§ˆ
pal kb classify <file>
pal kb lint <file-or-dir> [--strict]
```

---

## 9. ì„¤ì • íŒŒì¼

### 9.1 .pal/config.yaml

```yaml
version: 0.4.0
project:
  name: my-project
workflow:
  type: integrate      # integrate, multi, pipeline
agents:
  core:
    - builder
    - planner
    - architect
    - operator
    - tester
settings:
  auto_port_create: true
  require_user_review: true
  auto_test_on_complete: true
```

### 9.2 .pal/manifest.yaml

PAL Kitì´ ê´€ë¦¬í•˜ëŠ” íŒŒì¼ ì¶”ì  ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì…ë‹ˆë‹¤.

```yaml
version: "1"
updated_at: "2026-01-15T00:00:00+09:00"
files:
  CLAUDE.md:
    path: CLAUDE.md
    type: context
    hash: sha256:...
    managed_by: pal
  agents/core/builder.yaml:
    path: agents/core/builder.yaml
    type: agent
    managed_by: pal
```

### 9.3 .claude/settings.json

Claude Code Hook ì„¤ì •ì…ë‹ˆë‹¤.

```json
{
  "hooks": {
    "SessionStart": [...],
    "SessionEnd": [...],
    "PreToolUse": [...],
    "PostToolUse": [...],
    "PreCompact": [...],
    "Stop": [...]
  }
}
```

---

## ë¶€ë¡: ë¬¸ì œ í•´ê²°

### Q: í¬íŠ¸ rulesê°€ ë¡œë“œë˜ì§€ ì•Šì•„ìš”

1. í¬íŠ¸ ìƒíƒœ í™•ì¸: `pal port show <id>`
2. running ìƒíƒœì¸ì§€ í™•ì¸
3. `.claude/rules/<id>.rules.md` íŒŒì¼ ì¡´ì¬ í™•ì¸
4. ë™ê¸°í™”: `pal hook sync`

### Q: ì»´íŒ©ì…˜ í›„ ì»¨í…ìŠ¤íŠ¸ê°€ ìœ ì‹¤ëì–´ìš”

1. CLAUDE.mdì˜ `pal:context` ì„¹ì…˜ í™•ì¸
2. running í¬íŠ¸ í™•ì¸: `pal port list --status running`
3. í•„ìš”ì‹œ í¬íŠ¸ ë‹¤ì‹œ ì‹œì‘: `pal hook port-start <id>`

### Q: Hookì´ ë™ì‘í•˜ì§€ ì•Šì•„ìš”

1. `.claude/settings.json` í™•ì¸
2. `pal` ëª…ë ¹ì´ PATHì— ìˆëŠ”ì§€ í™•ì¸
3. Hook ìˆ˜ë™ í…ŒìŠ¤íŠ¸: `echo '{}' | pal hook session-start`

---

*PAL Kit v0.4.0 | 2026-01*
